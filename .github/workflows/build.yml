name: Build
on: [push, pull_request]

jobs:
    build:
        name: Build
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - name: Set up JDK 11
              uses: actions/setup-java@v2
              with:
                  java-version: "11"
                  distribution: "adopt"
            - name: Set up clang format
              run: |
                  sudo apt-get install clang-format-12
                  sudo ln -sf /usr/bin/clang-format-12 /usr/bin/clang-format
            - name: Install roboRIO Toolchain
              run: ./gradlew installRoboRioToolchain
            - name: Run Tests
              run: ./gradlew check
            - name: Build All
              run: ./gradlew build
